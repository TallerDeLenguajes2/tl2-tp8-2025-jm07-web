@model Presupuestos

<section class="container mt-5">

    <h2 class="mb-4">Detalle del Presupuesto</h2>

    <!-- ENCABEZADO -->
    <section class="card p-3 mb-4">
        <p><strong>ID del Presupuesto:</strong> @Model.IdPresupuesto</p>
        <p><strong>Nombre del destinatario:</strong> @Model.nombreDestinatario</p>
        <p><strong>Fecha de creación:</strong> @Model.FechaCreacion</p>
        <p><strong>Monto Total:</strong> @Model.MontoPresupuesto()</p>
        <p><strong>Monto Total con IVA:</strong> @Model.MontoPresupuestoConIva()</p>
    </section>

    <!-- LISTA DE PRODUCTOS -->
    <h4>Productos incluidos</h4>

    @if (Model.detalle != null && Model.detalle.Count > 0)
    {
        <table class="table table-bordered mt-3 text-center">
            <thead class="table-dark">
                <tr>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Subtotal</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.detalle)
                {
                    var subtotal = item.cantidad * item.producto.precio;

                    <tr>
                        <td>@item.producto.descripcion</td>
                        <td>@item.cantidad</td>
                        <td>$@subtotal</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p class="text-muted mt-2">Este presupuesto todavía no tiene productos asociados.</p>
    }
    <a class="btn btn-secondary" asp-controller="Presupuestos" asp-action="Index">volver</a>
</section>
